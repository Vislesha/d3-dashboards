<div class="dashboard-container" role="region" aria-label="Dashboard container">
  <gridster [options]="gridsterOptions" [attr.aria-label]="'Dashboard grid with ' + validatedWidgets.length + ' widgets'">
    @if (isEmpty) {
      <div class="empty-dashboard-message" role="status" aria-live="polite">
        <div class="empty-message-content">
          <i class="pi pi-inbox" aria-hidden="true"></i>
          <p>No widgets to display</p>
        </div>
      </div>
    } @else {
      @for (widget of validatedWidgets; track widget.id) {
        <gridster-item [item]="widget.position" [attr.aria-label]="widget.title + ' widget'">
          <div class="widget-wrapper" [attr.data-widget-id]="widget.id" [attr.data-widget-type]="widget.type">
            <lib-widget
              [widget]="widget"
              [isEditMode]="false"
              [filters]="getWidgetFilters(widget.id)"
              (widgetUpdate)="onWidgetUpdate($event)"
              (widgetDelete)="onWidgetDelete($event)"
              (widgetAction)="onWidgetAction($event)"
              (dataLoad)="onWidgetDataLoad($event)">
            </lib-widget>
          </div>
        </gridster-item>
      }
    }
  </gridster>
</div>

